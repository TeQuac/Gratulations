<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>Geburtstagskalender</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app-shell" id="appShell">
      <header class="app-header">
        <h1>Geburtstagskalender</h1>
        <div class="view-toggle" role="tablist" aria-label="Kalenderansicht">
          <button id="monthViewBtn" class="toggle-btn active" role="tab" aria-selected="true">Monat</button>
          <button id="weekViewBtn" class="toggle-btn" role="tab" aria-selected="false">Woche</button>
        </div>
      </header>

      <section class="calendar-panel">
        <div class="notification-banner" id="notificationBanner">
          <p id="notificationStatus">Benachrichtigungen sind aus.</p>
          <div class="notification-controls">
            <label for="notificationTime">Uhrzeit</label>
            <input type="time" id="notificationTime" value="08:00" />
            <button type="button" id="enableNotificationsBtn">Benachrichtigungen aktivieren</button>
          </div>
        </div>
        <div class="calendar-nav">
          <button id="prevBtn" aria-label="Zurück">◀</button>
          <h2 id="calendarTitle"></h2>
          <button id="nextBtn" aria-label="Weiter">▶</button>
        </div>
        <div class="weekday-row" id="weekdayRow"></div>
        <div class="calendar-grid" id="calendarGrid"></div>
        <section class="today-birthdays" id="todayBirthdays" aria-live="polite">
          <h3>Heute haben Geburtstag</h3>
          <ul id="todayBirthdaysList"></ul>
        </section>
      </section>
    </div>

    <dialog id="dayModal" class="modal">
      <form method="dialog" class="modal-card" id="dayFormContainer">
        <div class="modal-head">
          <h3 id="modalDateTitle"></h3>
          <button id="closeDayModalBtn" class="icon-btn" type="button" aria-label="Fenster schließen">✕</button>
        </div>

        <div id="entriesList" class="entries-list"></div>

        <fieldset class="entry-form" id="entryEditor">
          <legend>Geburtstag hinzufügen / bearbeiten</legend>
          <label>
            Datum
            <input type="date" id="birthDate" required />
          </label>
          <label>
            Name
            <input type="text" id="personName" maxlength="80" required />
          </label>
          <label>
            Spitzname (optional)
            <input type="text" id="nickname" maxlength="40" placeholder="z. B. Alex" />
          </label>
          <label>
            Beziehung
            <select id="relationship" required>
              <option value="Mutter">Mutter</option>
              <option value="Vater">Vater</option>
              <option value="Tochter">Tochter</option>
              <option value="Sohn">Sohn</option>
              <option value="Schwester">Schwester</option>
              <option value="Bruder">Bruder</option>
              <option value="Oma">Oma</option>
              <option value="Opa">Opa</option>
              <option value="Tante">Tante</option>
              <option value="Onkel">Onkel</option>
              <option value="Cousine">Cousine</option>
              <option value="Cousin">Cousin</option>
              <option value="Enkelin">Enkelin</option>
              <option value="Enkel">Enkel</option>
              <option value="Entfernter Verwandter">Entfernter Verwandter</option>
              <option value="Guter Freund">Guter Freund</option>
              <option value="Sehr guter Freund">Sehr guter Freund</option>
              <option value="Bester Freund">Bester Freund</option>
              <option value="Entfernter Bekannter">Entfernter Bekannter</option>
              <option value="Guter Bekannter">Guter Bekannter</option>
              <option value="Arbeitskollege">Arbeitskollege</option>
              <option value="Chef">Chef</option>
              <option value="Sportsfreund">Sportsfreund</option>
              <option value="Nachbar">Nachbar</option>
              <option value="Vereinskollege">Vereinskollege</option>
            </select>
          </label>
          <label>
            Auswahl
            <select id="salutation" required>
              <option value="Herr">Herr</option>
              <option value="Frau">Frau</option>
              <option value=" "> </option>
            </select>
          </label>
          <label>
            Geschlecht
            <select id="gender" required>
              <option value="männlich">männlich</option>
              <option value="weiblich">weiblich</option>
              <option value="divers">divers</option>
            </select>
          </label>
          <label>
            Stärke der Bindung
            <select id="bondStrength" required>
              <option value="sehr eng">Sehr eng</option>
              <option value="eng">Eng</option>
              <option value="mittel">Mittel</option>
              <option value="locker">Locker</option>
            </select>
          </label>
          <label>
            Kurzbeschreibung
            <textarea id="description" rows="2" maxlength="180" required></textarea>
          </label>
          <label>
            Kommunikationsstil
            <select id="communicationStyle" required>
              <option value="herzlich und emotional">Herzlich und emotional</option>
              <option value="locker und humorvoll">Locker und humorvoll</option>
              <option value="respektvoll und formell">Respektvoll und formell</option>
              <option value="kurz und direkt">Kurz und direkt</option>
            </select>
          </label>
          <label>
            Smileys verwenden
            <select id="emojiPreference" required>
              <option value="ja">Ja</option>
              <option value="nein">Nein</option>
            </select>
          </label>
          <label>
            Bist du ein Vielschreiber?
            <select id="writerType" required>
              <option value="ja">Ja, ich schreibe gerne viel</option>
              <option value="nein">Nein, lieber kurz</option>
            </select>
          </label>
          <label>
            E-Mail (optional, für Direktversand)
            <input type="email" id="email" maxlength="120" placeholder="z. B. alex@example.com" />
          </label>
          <label>
            WhatsApp-Nummer (optional, inkl. Ländervorwahl)
            <input type="tel" id="whatsapp" maxlength="25" placeholder="z. B. +491701234567" />
          </label>
          <div class="form-actions">
            <button type="button" id="saveEntryBtn">Speichern</button>
            <button type="button" id="clearFormBtn" class="secondary">Zurücksetzen</button>
          </div>
        </fieldset>
      </form>
    </dialog>

    <dialog id="wishModal" class="modal">
      <form method="dialog" class="modal-card">
        <div class="modal-head">
          <h3>Personalisierter Glückwunsch</h3>
          <button id="closeWishModalBtn" class="icon-btn" type="button" aria-label="Fenster schließen">✕</button>
        </div>
        <p id="wishText" class="wish-text"></p>
        <div class="form-actions">
          <button type="button" id="copyWishBtn">Text kopieren</button>
          <button type="button" id="sendMailBtn" class="secondary icon-only" aria-label="Per E-Mail senden" title="Per E-Mail senden">✉️</button>
          <button type="button" id="sendWhatsAppBtn" class="secondary icon-only" aria-label="Per WhatsApp senden" title="Per WhatsApp senden"><span class="whatsapp-icon" aria-hidden="true"></span></button>
        </div>
      </form>
    </dialog>

    <dialog id="dailyWishModal" class="modal">
      <form method="dialog" class="modal-card">
        <div class="modal-head">
          <h3>Automatische Geburtstagsgrüße heute</h3>
          <button id="closeDailyWishModalBtn" class="icon-btn" type="button" aria-label="Fenster schließen">✕</button>
        </div>
        <div id="dailyWishList" class="entries-list"></div>
      </form>
    </dialog>

    <script src="app.js"></script>
  </body>
</html>
